L.Google=L.Class.extend({includes:L.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",opacity:1,continuousWorld:!1,noWrap:!1},initialize:function(e,t){L.Util.setOptions(this,t),this._type=google.maps.MapTypeId[e||"SATELLITE"]},onAdd:function(e,t){this._map=e,this._insertAtTheBottom=t,this._initContainer(),this._initMapObject(),e.on("viewreset",this._resetCallback,this),this._limitedUpdate=L.Util.limitExecByInterval(this._update,150,this),e.on("move",this._update,this),this._reset(),this._update()},onRemove:function(e){this._map._container.removeChild(this._container),this._map.off("viewreset",this._resetCallback,this),this._map.off("move",this._update,this)},getAttribution:function(){return this.options.attribution},setOpacity:function(e){this.options.opacity=e,e<1&&L.DomUtil.setOpacity(this._container,e)},_initContainer:function(){var e=this._map._container;first=e.firstChild,this._container||(this._container=L.DomUtil.create("div","leaflet-google-layer leaflet-top leaflet-left"),this._container.id="_GMapContainer"),e.insertBefore(this._container,first),this.setOpacity(this.options.opacity);var t=this._map.getSize();this._container.style.width=t.x+"px",this._container.style.height=t.y+"px",this._container.style.zIndex=0},_initMapObject:function(){this._google_center=new google.maps.LatLng(0,0);var e=new google.maps.Map(this._container,{center:this._google_center,zoom:0,mapTypeId:this._type,disableDefaultUI:!0,keyboardShortcuts:!1,draggable:!1,disableDoubleClickZoom:!0,scrollwheel:!1,streetViewControl:!1}),t=this;this._reposition=google.maps.event.addListenerOnce(e,"center_changed",function(){t.onReposition()}),e.backgroundColor="#ff0000",this._google=e},_resetCallback:function(e){this._reset(e.hard)},_reset:function(e){this._initContainer()},_update:function(){this._resize();var e=this._map.getBounds(),t=e.getNorthEast(),n=e.getSouthWest(),r=new google.maps.LatLngBounds(new google.maps.LatLng(n.lat,n.lng),new google.maps.LatLng(t.lat,t.lng)),i=this._map.getCenter(),s=new google.maps.LatLng(i.lat,i.lng);this._google.setCenter(s),this._google.setZoom(this._map.getZoom())},_resize:function(){var e=this._map.getSize();if(this._container.style.width==e.x&&this._container.style.height==e.y)return;this._container.style.width=e.x+"px",this._container.style.height=e.y+"px",google.maps.event.trigger(this._google,"resize")},onReposition:function(){}});